{% extends 'umt_youth_union/base.html' %}
{% block title %}Trang Tổng Quan{% endblock %}

{% block content %} <style>
    .dashboard-header { background: linear-gradient(135deg, #003366 0%, #0056b3 100%); color: white; padding: 30px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,51,102,0.2); display: flex; align-items: center; gap: 25px; margin-bottom: 30px; }
    .user-avatar-large { width: 100px; height: 100px; border-radius: 50%; border: 4px solid rgba(255,255,255,0.4); object-fit: cover; }
    .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
    .stat-card-link { text-decoration: none; color: inherit; transition: 0.3s; }
    .stat-card-link:hover { transform: translateY(-5px); }
    .stat-card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); border-left: 5px solid #ccc; display: flex; justify-content: space-between; align-items: center; }
    .stat-value { font-size: 32px; font-weight: 800; color: #333; margin-top: 5px; }
    .stat-label { color: #888; font-size: 13px; font-weight: bold; text-transform: uppercase; }
</style>

<div class="dashboard-header">
    {% if sinh_vien.avatar %}
        <img src="{{ sinh_vien.avatar.url }}" class="user-avatar-large">
    {% else %}
        <div class="user-avatar-large" style="background:#eee; display:flex; align-items:center; justify-content:center; color:#999; font-size:40px;"><i class="fas fa-user"></i></div>
    {% endif %}
    
    <div>
        <h2 style="margin: 0;">Xin chào, {{ user.last_name }} {{ user.first_name }}!</h2>
        {% if user.is_superuser %}
            <p style="margin: 5px 0; opacity: 0.9; color: #f1c40f; font-weight: bold;">QUẢN TRỊ VIÊN HỆ THỐNG</p>
        {% else %}
            <p style="margin: 5px 0; opacity: 0.9;">{{ sinh_vien.get_chuc_vu_display }}</p>
            {% if not sinh_vien.ma_sinh_vien %}<a href="{% url 'profile' %}" style="color: #ffeb3b; font-weight: bold;">⚠️ Vui lòng cập nhật hồ sơ ngay</a>{% endif %}
        {% endif %}
    </div>
</div>

<div class="stats-grid">
    <a href="{% url 'danh_sach_ho_so' %}" class="stat-card-link">
        <div class="stat-card" style="border-left-color: #ff9800;">
            <div><div class="stat-label">Hồ sơ chờ duyệt</div><div class="stat-value" style="color: #ff9800;">{{ so_ho_so_cho }}</div></div>
            <i class="fas fa-clock" style="font-size: 35px; color: #ff9800; opacity: 0.3;"></i>
        </div>
    </a>
    <a href="{% url 'vinh_danh' %}" class="stat-card-link">
        <div class="stat-card" style="border-left-color: #27ae60;">
            <div><div class="stat-label">Gương mặt vinh danh</div><div class="stat-value" style="color: #27ae60;">{{ so_sv_dat }}</div></div>
            <i class="fas fa-medal" style="font-size: 35px; color: #27ae60; opacity: 0.3;"></i>
        </div>
    </a>
    <a href="{% url 'quy_dinh' %}" class="stat-card-link">
        <div class="stat-card" style="border-left-color: #2980b9;">
            <div><div class="stat-label">Văn bản mới</div><div class="stat-value" style="color: #2980b9;">{{ so_van_ban }}</div></div>
            <i class="fas fa-book" style="font-size: 35px; color: #2980b9; opacity: 0.3;"></i>
        </div>
    </a>
</div>
{% endblock %}